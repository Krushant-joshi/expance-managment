generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model categories {
  CategoryID     Int              @id @default(autoincrement())
  CategoryName   String           @db.VarChar(250)
  LogoPath       String?          @db.VarChar(250)
  IsExpense      Boolean          @db.Bit(1)
  IsIncome       Boolean          @db.Bit(1)
  IsActive       Boolean          @default(dbgenerated("b'1'")) @db.Bit(1)
  Description    String?          @db.VarChar(500)
  UserID         Int
  Created        DateTime         @default(now()) @db.DateTime(0)
  Modified       DateTime         @default(now()) @db.DateTime(0)
  Sequence       Decimal?         @db.Decimal(10, 2)
  users          users            @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "categories_ibfk_1")
  expenses       expenses[]
  incomes        incomes[]
  sub_categories sub_categories[]

  @@index([UserID], map: "UserID")
}

model expense_status {
  StatusID   Int        @id @default(autoincrement())
  StatusName String     @db.VarChar(100)
  expenses   expenses[]
}

model expenses {
  ExpenseID      Int             @id @default(autoincrement())
  ExpenseDate    DateTime        @db.DateTime(0)
  CategoryID     Int?
  SubCategoryID  Int?
  PeopleID       Int
  ProjectID      Int?
  Amount         Decimal         @db.Decimal(12, 2)
  ExpenseDetail  String?         @db.VarChar(500)
  AttachmentPath String?         @db.VarChar(250)
  Description    String?         @db.VarChar(500)
  UserID         Int
  Created        DateTime        @default(now()) @db.DateTime(0)
  Modified       DateTime        @default(now()) @db.DateTime(0)
  StatusID       Int?            @default(1)
  PaymentMethod  String?         @db.VarChar(50)
  categories     categories?     @relation(fields: [CategoryID], references: [CategoryID])
  peoples        peoples         @relation(fields: [PeopleID], references: [PeopleID])
  projects       projects?       @relation(fields: [ProjectID], references: [ProjectID])
  expense_status expense_status? @relation(fields: [StatusID], references: [StatusID])
  sub_categories sub_categories? @relation(fields: [SubCategoryID], references: [SubCategoryID])
  users          users           @relation(fields: [UserID], references: [UserID])

  @@index([CategoryID], map: "expenses_CategoryID_fkey")
  @@index([StatusID], map: "expenses_StatusID_fkey")
  @@index([SubCategoryID], map: "expenses_SubCategoryID_fkey")
  @@index([UserID], map: "expenses_UserID_fkey")
  @@index([ExpenseDate], map: "idx_expense_date")
  @@index([PeopleID], map: "idx_people")
  @@index([ProjectID], map: "idx_project")
}

model incomes {
  IncomeID       Int             @id @default(autoincrement())
  IncomeDate     DateTime        @db.DateTime(0)
  CategoryID     Int?
  SubCategoryID  Int?
  PeopleID       Int
  ProjectID      Int?
  Amount         Decimal         @db.Decimal(12, 2)
  IncomeDetail   String?         @db.VarChar(500)
  AttachmentPath String?         @db.VarChar(250)
  Description    String?         @db.VarChar(500)
  UserID         Int
  Created        DateTime        @default(now()) @db.DateTime(0)
  Modified       DateTime        @default(now()) @db.DateTime(0)
  categories     categories?     @relation(fields: [CategoryID], references: [CategoryID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_1")
  sub_categories sub_categories? @relation(fields: [SubCategoryID], references: [SubCategoryID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_2")
  peoples        peoples         @relation(fields: [PeopleID], references: [PeopleID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_3")
  projects       projects?       @relation(fields: [ProjectID], references: [ProjectID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_4")
  users          users           @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_5")

  @@index([CategoryID], map: "CategoryID")
  @@index([PeopleID], map: "PeopleID")
  @@index([ProjectID], map: "ProjectID")
  @@index([SubCategoryID], map: "SubCategoryID")
  @@index([UserID], map: "UserID")
  @@index([IncomeDate], map: "idx_income_date")
}

model peoples {
  PeopleID    Int        @id @default(autoincrement())
  PeopleCode  String?    @db.VarChar(50)
  Password    String     @db.VarChar(255)
  PeopleName  String     @db.VarChar(250)
  Email       String     @unique(map: "Email") @db.VarChar(150)
  MobileNo    String     @db.VarChar(50)
  Description String?    @db.VarChar(500)
  UserID      Int
  Created     DateTime   @default(now()) @db.DateTime(0)
  Modified    DateTime   @default(now()) @db.DateTime(0)
  IsActive    Boolean?   @default(dbgenerated("b'1'")) @db.Bit(1)
  expenses    expenses[]
  incomes     incomes[]
  users       users      @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "peoples_ibfk_1")

  @@index([UserID], map: "UserID")
}

model projects {
  ProjectID        Int        @id @default(autoincrement())
  ProjectName      String     @db.VarChar(250)
  ProjectLogo      String?    @db.VarChar(250)
  ProjectStartDate DateTime?  @db.DateTime(0)
  ProjectEndDate   DateTime?  @db.DateTime(0)
  ProjectDetail    String?    @db.VarChar(500)
  Description      String?    @db.VarChar(500)
  UserID           Int
  Created          DateTime   @default(now()) @db.DateTime(0)
  Modified         DateTime   @default(now()) @db.DateTime(0)
  IsActive         Boolean?   @default(dbgenerated("b'1'")) @db.Bit(1)
  expenses         expenses[]
  incomes          incomes[]
  users            users      @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "projects_ibfk_1")

  @@index([UserID], map: "UserID")
}

model roles {
  RoleID   Int     @id @default(autoincrement())
  RoleName String  @db.VarChar(50)
  users    users[]
}

model sub_categories {
  SubCategoryID   Int        @id @default(autoincrement())
  CategoryID      Int
  SubCategoryName String     @db.VarChar(250)
  LogoPath        String?    @db.VarChar(250)
  IsExpense       Boolean    @db.Bit(1)
  IsIncome        Boolean    @db.Bit(1)
  IsActive        Boolean    @default(dbgenerated("b'1'")) @db.Bit(1)
  Description     String?    @db.VarChar(500)
  UserID          Int
  Created         DateTime   @default(now()) @db.DateTime(0)
  Modified        DateTime   @default(now()) @db.DateTime(0)
  Sequence        Decimal?   @db.Decimal(10, 2)
  expenses        expenses[]
  incomes         incomes[]
  categories      categories @relation(fields: [CategoryID], references: [CategoryID], onDelete: NoAction, onUpdate: NoAction, map: "sub_categories_ibfk_1")
  users           users      @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "sub_categories_ibfk_2")

  @@index([CategoryID], map: "CategoryID")
  @@index([UserID], map: "UserID")
}

model users {
  UserID         Int              @id @default(autoincrement())
  UserName       String           @db.VarChar(250)
  EmailAddress   String           @unique(map: "EmailAddress") @db.VarChar(500)
  Password       String           @db.VarChar(255)
  MobileNo       String           @db.VarChar(50)
  ProfileImage   String?          @db.VarChar(500)
  Created        DateTime         @default(now()) @db.DateTime(0)
  Modified       DateTime         @default(now()) @db.DateTime(0)
  RoleID         Int?
  categories     categories[]
  expenses       expenses[]
  incomes        incomes[]
  peoples        peoples[]
  projects       projects[]
  sub_categories sub_categories[]
  roles          roles?           @relation(fields: [RoleID], references: [RoleID], onDelete: NoAction, onUpdate: NoAction, map: "users_ibfk_1")

  @@index([RoleID], map: "RoleID")
}
